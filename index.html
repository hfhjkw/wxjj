import streamlit as st
import random
from datetime import date

# --- é¡µé¢åŸºç¡€é…ç½® ---
st.set_page_config(
    page_title="ğŸ’– æˆ‘ä»¬çš„ä¸“å±ç©ºé—´",
    page_icon="ğŸ’‘",
    layout="wide",
    initial_sidebar_state="expanded"
)

# --- èƒŒæ™¯å›¾åˆ—è¡¨ ---
cute_backgrounds = [
    "https://images.unsplash.com/photo-1606761569183-dc44d51d247d?auto=format&fit=crop&w=1920&q=80",
    "https://images.unsplash.com/photo-1616482680981-0b6f1e111a7b?auto=format&fit=crop&w=1920&q=80",
    "https://images.unsplash.com/photo-1612851647801-21d5d35c6a99?auto=format&fit=crop&w=1920&q=80",
    "https://images.unsplash.com/photo-1602810316803-67cc408b4455?auto=format&fit=crop&w=1920&q=80",
    "https://images.unsplash.com/photo-1607698201221-89f1c8174a8d?auto=format&fit=crop&w=1920&q=80"
]

today = date.today()
random.seed(today.toordinal())
bg_url = random.choice(cute_backgrounds)

# --- é«˜çº§ CSS + HTML å¸ƒå±€ ---
st.markdown(f"""
<style>
/* èƒŒæ™¯ */
.stApp {{
    background-image: url('{bg_url}');
    background-size: cover;
    background-position: center;
}}

/* é¡µé¢æ•´ä½“å¡ç‰‡æ ·å¼ */
.card {{
    max-width: 700px;
    margin: 30px auto;
    padding: 30px;
    border-radius: 20px;
    background-color: rgba(255,255,255,0.85);
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    text-align: center;
    font-family: 'Arial', sans-serif;
}}

/* ä»Šæ—¥æƒ…è¯æ ·å¼ */
.quote {{
    font-size: 24px;
    font-weight: bold;
    color: #FF6B6B;
    line-height: 1.6;
    margin-top: 20px;
}}

/* å¿ƒæƒ…åé¦ˆæ ·å¼ */
.mood {{
    margin-top: 20px;
    font-size: 20px;
}}

/* å€’è®¡æ—¶æ•°å­— */
.big-number {{
    font-size: 50px;
    color: #FF6B6B;
    font-weight: 800;
}}

/* åº•éƒ¨æ–‡å­— */
.footer {{
    text-align: center;
    color: grey;
    margin-top: 50px;
}}
</style>
""", unsafe_allow_html=True)

# --- ä¾§è¾¹æ çºªå¿µæ—¥ ---
with st.sidebar:
    st.title("ğŸ’‘ å…³äºæˆ‘ä»¬")
    start_date = date(2023, 5, 20)
    days_together = (today - start_date).days
    st.markdown("æˆ‘ä»¬å·²ç»ç›¸çˆ±äº†ï¼š")
    st.markdown(f"<div class='big-number'>{days_together} å¤©</div>", unsafe_allow_html=True)
    st.markdown("---")
    st.write("Database Version: 100-Quotes-Update")

# --- ç™¾å¥æƒ…è¯ ---
love_quotes = [
    "ä»Šå¤©çš„ä½ ä¹Ÿæ¯”å…¨ç³–å¥¶èŒ¶è¿˜è¦ç”œã€‚ğŸ¥¤",
    "æƒ³å’Œä½ å»åƒç«é”…ï¼Œç°åœ¨ï¼Œç«‹åˆ»ï¼Œé©¬ä¸Šã€‚ğŸ²",
    "ä½ çš„ç¬‘å®¹æ˜¯æˆ‘ä»£ç é‡Œå”¯ä¸€çš„ Bugã€‚ğŸ›",
    "Error 404ï¼šæ‰¾ä¸åˆ°ä¸å–œæ¬¢ä½ çš„ç†ç”±ã€‚ğŸš«",
    "ä½ å°±æ˜¯æˆ‘çš„ import favoriteã€‚ğŸ’»",
    "ä»Šå¤©å¤©æ°”å¾ˆå¥½ï¼Œä½†ä¹Ÿæ¯”ä¸ä¸Šè§åˆ°ä½ ã€‚â˜€ï¸",
    "é‡è§ä½ ï¼Œæ˜¯æ‰€æœ‰ç®—æ³•é‡Œæœ€ä¼˜çš„è§£ã€‚â¤ï¸",
    "ä½ ä¸€å‡ºç°ï¼Œæˆ‘çš„ä¸–ç•Œå°±è‡ªåŠ¨é«˜äº®äº†ã€‚âœ¨",
    "å¦‚æœæ€å¿µæœ‰é¢œè‰²ï¼Œé‚£ä¸€å®šæ˜¯ä½ çš„æ ·å­ã€‚ğŸ¨",
    "æˆ‘çš„å¿«ä¹å‡½æ•°ï¼Œå‚æ•°åªæœ‰ä½ ã€‚ğŸ˜Š",
    # å¯ä»¥æ‰©å±•åˆ°100æ¡
]

# --- ä¸»ç•Œé¢ ---
random.seed(today.toordinal())
quote = random.choice(love_quotes)

st.markdown(f"""
<div class="card">
    <h1>æ—©ä¸Šå¥½ï¼æˆ‘çš„ä¸“å± VIP â˜€ï¸</h1>
    <p class="quote">ğŸ’Œ ä»Šæ—¥æƒ…è¯ï¼š{quote}</p>
</div>
""", unsafe_allow_html=True)

# --- å¿ƒæƒ…åé¦ˆ ---
st.markdown('<div class="card mood">', unsafe_allow_html=True)
mood = st.radio("ä½ ä»Šå¤©å¿ƒæƒ…å¦‚ä½•ï¼Ÿ", ["å¼€å¿ƒ ğŸ˜„", "ä¸€èˆ¬ ğŸ˜", "æƒ³ä½  ğŸ¥º", "ç”Ÿæ°” ğŸ˜ "], index=0, label_visibility="collapsed")

if st.button("å‘Šè¯‰ä»–", type="secondary"):
    if mood == "å¼€å¿ƒ ğŸ˜„":
        st.success("å¤ªæ£’äº†ï¼è¦æŠŠè¿™ä»½å¼€å¿ƒä¿æŒä¸€æ•´å¤©å“¦ï¼")
        st.snow()
    elif mood == "ä¸€èˆ¬ ğŸ˜":
        st.info("æŠ±æŠ±ï¼æ™šä¸Šå¸¦ä½ å»åƒå¥½åƒçš„ææç¥ï¼")
    elif mood == "æƒ³ä½  ğŸ¥º":
        st.warning("æˆ‘ä¹Ÿæ˜¯ï¼æ­£åœ¨é£å¥”å‘ä½ çš„è·¯ä¸Šï¼ˆç²¾ç¥ä¸Šï¼‰ï¼ğŸƒâ€â™‚ï¸")
    elif mood == "ç”Ÿæ°” ğŸ˜ ":
        st.error("è­¦æŠ¥ï¼è­¦æŠ¥ï¼æ­£åœ¨å¯åŠ¨ã€Œå“„äººæ¨¡å¼ã€... å¯¹ä¸èµ·æˆ‘é”™å•¦ï¼ğŸ˜­")
st.markdown('</div>', unsafe_allow_html=True)

# --- å½©è›‹ ---
st.markdown("---")
with st.expander("ğŸ” åªæœ‰ä½ èƒ½æ‰“å¼€çš„ç§˜å¯†é€šé“"):
    secret_code = st.text_input("è¯·è¾“å…¥æš—å·ï¼š", type="password")
    if secret_code == "520":
        st.success("æš—å·æ­£ç¡®ï¼è§£é”éšè—æƒŠå–œï¼")
        st.image("https://images.unsplash.com/photo-1607698201221-89f1c8174a8d?auto=format&fit=crop&w=800&q=80",
                 caption="è¿™æ˜¯æˆ‘ä»¬å¯çˆ±çš„åˆç…§ï¼")
    elif secret_code:
        st.error("æš—å·é”™è¯¯ï¼Œæ˜¯ä¸æ˜¯ä¸çˆ±æˆ‘äº†ï¼ŸğŸ˜¤")

# --- åº•éƒ¨ ---
st.markdown("<div class='footer'>Developed with Python & Streamlit ğŸ</div>", unsafe_allow_html=True)
